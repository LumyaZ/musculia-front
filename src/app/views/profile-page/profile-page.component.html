<app-nav-bar></app-nav-bar>

<div class="profile-container with-header-navbar-offset" *ngIf="userProfile">
  <div class="personal-info-block">
    <div class="profile-main">
      <div class="profile-header">
        <div class="profile-avatar">
          {{ getInitials() }}
        </div>
        <div class="profile-info">
          <h2>{{ userProfile.authUser?.email || 'Utilisateur' }}</h2>
        </div>
      </div>

      <div class="profile-stats">
        <div class="stat-item">
          <span class="stat-value">0</span>
          <span class="stat-label">Abonnements</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">0</span>
          <span class="stat-label">Abonnés</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Informations Complémentaires -->
  <div class="profile-section-block">
    <div class="section-header">
      <h3>Informations Complémentaires</h3>
      <button class="edit-button" (click)="openModal('basic')">
        <i class="fas fa-pencil-alt"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">Genre</span>
          <span class="info-value">{{ getTranslatedGender(userProfile.gender) }}</span>
        </div>
        <div class="info-item highlight">
          <span class="info-label">Poids</span>
          <span class="info-value">{{ userProfile.weight }}<small>kg</small></span>
        </div>
        <div class="info-item highlight">
          <span class="info-label">Taille</span>
          <span class="info-value">{{ userProfile.height }}<small>cm</small></span>
        </div>
        <div class="info-item">
          <span class="info-label">Masse Grasse</span>
          <span class="info-value">{{ userProfile.bodyFat }}<small>%</small></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Expérience d'Entraînement -->
  <div class="profile-section-block">
    <div class="section-header">
      <h3>Expérience d'Entraînement</h3>
      <button class="edit-button" (click)="openModal('experience')">
        <i class="fas fa-pencil-alt"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="info-grid">
        <div class="info-item highlight">
          <span class="info-label">Expérience</span>
          <span class="info-value">{{ userProfile.experienceYears }}<small>ans</small></span>
        </div>
        <div class="info-item">
          <span class="info-label">Sessions/Semaine</span>
          <span class="info-value">{{ userProfile.trainingFrequency }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Durée Session</span>
          <span class="info-value">{{ userProfile.sessionDuration }}<small>min</small></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Objectifs et Préférences -->
  <div class="profile-section-block">
    <div class="section-header">
      <h3>Objectifs et Préférences</h3>
      <button class="edit-button" (click)="openModal('goals')">
        <i class="fas fa-pencil-alt"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="goals-grid">
        <div class="goal-item">
          <span class="goal-label">Objectif Principal</span>
          <span class="goal-value highlight">{{ getTranslatedGoal(userProfile.goal) }}</span>
        </div>
        <div class="goal-item">
          <span class="goal-label">Préférence d'Entraînement</span>
          <span class="goal-value highlight">{{ getTranslatedTrainingPreference(userProfile.trainingPreference) }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Équipement -->
  <div class="profile-section-block">
    <div class="section-header">
      <h3>Équipement Disponible</h3>
      <button class="edit-button" (click)="openModal('equipment')">
        <i class="fas fa-pencil-alt"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="equipment-list">
        <ng-container *ngFor="let equipment of getEquipmentList()">
          <div class="equipment-item">
            <i class="fas fa-check-circle"></i>
            <span>{{ equipment }}</span>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!userProfile" class="loading-message">
  Chargement du profil...
</div>

<app-profile-modal></app-profile-modal> 